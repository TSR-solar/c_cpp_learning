## C语言中的简单运算

### 数学运算
一个表达式是一系列**运算符**和**算子**的组合，用来计算一个值；  
**运算符**是指进行运算的动作；  
**算子**是指参与运算的值，这个值可能是**常数**，也可能是**变量**，还可能是一个函数的**返回值**；

运算符有很多种，比如 **+ - * / %** 都是运算符；  
当多个运算符出现在同一个表达式中时，是如何进行运算的呢？  
类似于“先乘除，后加减”，运算符之间也有**优先级**，用1，2，3...表示，**数字小的优先级高**；  
下面是一些运算符的优先级：  

| 优先级 | 运算符 | 运算     | 结合关系 | 举例   |
| ------ | ------ | -------- | -------- | ------ |
| 1      | ()     | 括号     | 自左向右 | a(b+c) |
| 2      | +      | 单目不变 | 自右向左 | a*+b   |
| 2      | -      | 单目取负 | 自右向左 | a*-b   |
| 2      | ++     | 自增     | 自右向左 | a++    |
| 2      | --     | 自减     | 自右向左 | a--    |
| 3      | *      | 乘       | 自左向右 | a*b    |
| 3      | /      | 除       | 自左向右 | a/b    |
| 3      | %      | 取余     | 自左向右 | a%b    |
| 4      | +      | 加       | 自左向右 | a+b    |
| 4      | -      | 减       | 自左向右 | a-b    |
| 14     | =      | 赋值     | 自右向左 | a=b    |
| 14     | +=     | 加法赋值 | 自右向左 | a+=b   |
| 14     | -=     | 减法赋值 | 自右向左 | a-=b   |
| 14     | *=     | 乘法赋值 | 自右向左 | a*=b   |
| 14     | /=     | 除法赋值 | 自右向左 | a/=b   |
| 14     | %=     | 取余赋值 | 自右向左 | a%=b   |

运算符可以以**算子数目**分类；  
单目运算符指只有一个算子的运算符，此外还有双目和三目运算符；  
一般来说，单目运算符的优先级更高；

**单目不变**和**单目取负**是指对它右边的数不变或取负；
如 a*-b ，即a乘以b的相反数；
因此它们的优先级最高；

结合关系是当**优先级相等**时**运算的顺序**；例：  
>a/b*c即为a/b后，再乘以c；  
--a即-(-a)，因为单目取负结合关系为**自右向左**；  
a=b=c 即先把c的值赋给b，再把b的值赋给a，因为赋值运算符结合关系为**自右向左**；

优先级一致的运算符结合关系**也相同**；

此外，还有复合赋值和自增自减运算符；

赋值运算符包含 **+= -= *= /=** ，它们的作用是快速将变量变成新的值；  
>如 a+=1 ，等价于 a = a + 1 ；

另外，要注意的是，*=和/=在使用时，由于运算优先级，会先将右边的结果算完再赋值；  
>如 a *= 6+12 等价于 a *=(6+12) 等价于 a = a * (6+12);

自增自减运算符可快速将变量的值变化1；  
>如 a++ 等价于 a+=1 等价于 a = a + 1 ：

此外，又有 **a++** 和 **++a** 两种表达方式；  
a++的值是a加1**以前**的值，而++a的值是加了1**以后**的值；  
无论哪个，a自己的值都加了1了；
具体，可以看下面的例子：(Self-incrementing.c)

```c
#include <stdio.h>
int main()
{
	int a = 1;
	printf("a=%d\n", a);
	printf("a++=%d\n", a++);
	a = 1;
	printf("++a=%d\n",++a);
	return 0;
}
```
输出结果：
>a=1  
a++=1  
++a=2

这就是因为++a先把值赋给了a再参与运算；
而a++先参与运算再赋值；
故 a++ =1；**但此时a的值已经是2了**；

另外，表达式在使用时应该尽量简便；
应避免使用复杂的表达式，而是拆成多个简单的，便于我们理解。  
像 *++a++* 这样的就是典型的**错误案例**；

### 关系运算

if函数离不开的就是关系运算符；以下是常见的关系运算符：  

| 优先级 | 运算符 | 运算       | 结合关系 | 示例 |
| ------ | ------ | ---------- | -------- | ---- |
| 6      | >      | 大于       | 从左向右 | a>b  |
| 6      | >=     | 大于或等于 | 从左向右 | a>=b |
| 6      | <      | 小于       | 从左向右 | a<b  |
| 6      | <=     | 小于或等于 | 从左向右 | a<=b |
| 7      | ==     | 等于       | 从左向右 | a==b |
| 7      | !=     | 不等于     | 从左向右 | a!=b |

当关系运算符所在的关系式**为真**时，输出1，反之输出0； 
实际上，if函数等正是通过检验括号内**是否为0**来决定要不要进行下面的内容的；

注意：**仍然遵循**从左至右的结合关系；
>例如 5>4>3  ->  1>3  ->  0

但 5>3==4>2 却是另一种算法，因为等于和不等于的**优先级略低**；
因此 5>3==4>2 等价于 1==1 ；

### 逻辑运算
逻辑运算符如下：

| 优先级 | 运算符 | 运算   | 结合关系 | 举例   |
| ------ | ------ | ------ | -------- | ------ |
| 2      | !      | 逻辑非 | 从右向左 | !a     |
| 11     | &&     | 逻辑与 | 从左向右 | a&&b   |
| 12     | \|\|   | 逻辑或 | 从左向右 | a\|\|b |

逻辑运算符主要检测其附近的表达式的值**是否为0**；  
对于逻辑与，只有两边的表达式结果**均不为0**时，才输出1；若有一个是0，则输出0；  
对于逻辑或，只要两边的表达式有一个结果不是0，就输出1；只有两个**均是0**时才输出0；  
对于逻辑非，它右边的表达式结果**为0**则输出1；**不为0**则输出0；

例如 

> 2&&0=0；3||0=1；!4=0；

注意：计算机在进行&&和||的运算时，若左边边的值足以判定结果为1还是0时，就不会看右边了！  
这种情况被称为**短路**。  
对于&&，左边是0时就不做右边了；    
对于||，左边是非0时就不做右边了；  
具体可以看下面的例子：(logic.c)

```c
#include <stdio.h>
int main()
{
	int a = 1;
	int b = 0;
	int c;
	c = (a==0) && (b+=1);
	printf("%d\n", b);
	return 0;
}
```

可以看到b的值仍然为0，b+=1**并没有执行**；  
为了避免短路，应该**避免在逻辑运算中插入赋值运算**；



### 条件运算符

它是**唯一**的**三目运算符**，其实也非常简单；
格式如下：

> a ? b : c ;

可翻译为判断a是否成立，**若是，进行b；若否，进行c**；  
作为运算符，它的运算优先级为13，仅仅高于一系列赋值运算符；


### 逗号运算符

逗号用来连接两个表达式，并以**其右边的表达式的值作为它的结果**。  
逗号的优先级是所有的运算符中最低的，所以它两边的表达式会先计算；  
逗号的组合关系是**自左向右**，所以左边的表达式会先计算，而右边的表达式的值就留下来作为逗号运算的结果。  
~~说实话这个运算符没什么用~~